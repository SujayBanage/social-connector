(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[10],{100:function(e,t,r){"use strict";r(0),r(103);var n=r(14),a=r(1);t.a=function(e){return e.linkTo?Object(a.jsx)(n.b,{to:e.linkTo,children:Object(a.jsx)("button",{className:e.classname,children:e.text})}):Object(a.jsx)("button",{className:e.classname,type:e.type,onClick:e.onclickHandler,children:e.text})}},102:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},103:function(e,t,r){},104:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(102);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},108:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(112);var a=r(111);function s(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},262:function(e,t,r){},282:function(e,t,r){"use strict";r.r(t);var n=r(97),a=r.n(n),s=r(98),c=r(101),o=r(108),u=r(104),i=r(0),l=r(50),p=r(2),d=r(100),f=r(99),b=(r(262),r(29)),h=(r(51),r.p+"static/media/iPhone.4c66df71.mp3"),j=r(1),m=Object(i.lazy)((function(){return r.e(25).then(r.bind(null,275))})),O=Object(i.lazy)((function(){return r.e(22).then(r.bind(null,155))})),y=Object(i.lazy)((function(){return r.e(23).then(r.bind(null,276))})),v=new Audio(h),x=new f.a,g="setMessages",w="setText",k="setChatType",C="setChatUsers",T="setFriends";t.default=function(){var e=Object(i.useContext)(l.socketContext),t=Object(p.g)(),r=t.chatroom,n=t.currentuser;console.log("in chatroom : ",r,"current user : ",n);var f=Object(p.f)(),h=Object(i.useReducer)((function(e,t){return"setText"===t.type?Object(u.a)(Object(u.a)({},e),{},{text:t.payload}):"setMessages"===t.type?Object(u.a)(Object(u.a)({},e),{},{messages:Object(o.a)(t.payload)}):"setChatType"===t.type?Object(u.a)(Object(u.a)({},e),{},{chatType:t.payload}):"setAddUsers"===t.type?Object(u.a)(Object(u.a)({},e),{},{addusers:t.payload}):"setUsers"===t.type?Object(u.a)(Object(u.a)({},e),{},{users:t.payload}):"setChatUsers"===t.type?Object(u.a)(Object(u.a)({},e),{},{chatusers:Object(o.a)(t.payload)}):"setFriends"===t.type?Object(u.a)(Object(u.a)({},e),{},{userfriends:Object(o.a)(t.payload)}):"setChosenEmoji"===t.type?Object(u.a)(Object(u.a)({},e),{},{emoji:Object(u.a)({},t.payload)}):e}),{text:"",messages:[],chatType:"",addusers:!1,users:"",chatusers:[],userfriends:[],emoji:null}),P=Object(c.a)(h,2),S=P[0],N=P[1];Object(i.useEffect)((function(){return console.log(r),n&&e.emit("join",{roomname:r}),Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.fetchPrivateData("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PRIVATE_URL,"/getmessages/").concat(r),sessionStorage.getItem("authToken"));case 3:!0===(t=e.sent).data.success&&(N({type:g,payload:t.data.messages}),N({type:k,payload:t.data.chatType}),N({type:C,payload:t.data.chatUsers}),N({type:T,payload:t.data.userfriends})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),function(){e.off()}}),[e]),e.on("updatedMessages",(function(e){var t=e.messages;e.currentmsg.user!==n&&v.play(),N({type:g,payload:t})})),e.on("updatedUsers",(function(e){var t=e.users,n=e.userfriends,a=e.userAdded;N({type:C,payload:t}),N({type:T,payload:n}),function(e,t){!0===e?b.b.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"success"}):!1===e?b.b.error(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"fail"}):Object(b.b)(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"no"})}(!0,{text:"".concat(a.username," is added to ").concat(r," room"),user:"admin"}.text)}));return Object(j.jsxs)("div",{className:"chatComponent flex flex-col md:flex-row h-full w-full md:w-screen  items-center md:items-center justify-center",children:[Object(j.jsx)("div",{className:"chatUsers flex flex-row flex-wrap md:flex-col items-center md:items-center justify-center md:justify-start md:h-screen w-screen md:w-1/5 overflow-x-scroll overflow-y-scroll",children:0!==S.chatusers.length?S.chatusers.map((function(e){return Object(j.jsx)(i.Suspense,{fallback:Object(j.jsx)("h1",{children:"loading...."}),children:Object(j.jsx)(m,{id:e._id,username:e.username,profileimage:e.profileimage,status:e.status},e._id)})})):Object(j.jsx)("h1",{children:"No users!!!"})}),Object(j.jsxs)("div",{className:"chatContainer flex flex-col items-center justify-center md:h-screen w-screen md:w-7/12 mr-4 ml-4",children:[Object(j.jsx)("div",{className:"chatBox flex flex-col overflow-y-scroll md:overflow-y-scroll p-4 mt-4 rounded-md h-full w-screen md:w-full",children:0!==S.messages.length?S.messages.map((function(e){return Object(j.jsx)(i.Suspense,{fallback:Object(j.jsx)("h1",{children:"loading....."}),children:Object(j.jsx)(y,{message:e,currentuser:n})})})):Object(j.jsx)("h1",{children:"no messages"})}),Object(j.jsxs)("div",{className:"messageBox flex w-full",children:[Object(j.jsx)("input",{type:"text",className:"w-full mt-2",value:S.text,onChange:function(e){return N({type:w,payload:e.target.value})}}),Object(j.jsx)(d.a,{text:"send",onclickHandler:function(){var t={text:S.text,user:n};e.emit("message",{message:t,roomname:r}),N({type:w,payload:""})},classname:"p-1 h-10 m-2 send rounded-md bg-green-500 text-white "}),Object(j.jsx)(d.a,{text:"leavechat",onclickHandler:function(){f.push("/messages")},classname:"p-1 h-10 m-2 leavechat rounded-md bg-red-500 text-white "})]})]}),Object(j.jsx)("div",{className:"groupChat"===S.chatType?"Addusers overflow-y-scroll flex md:flex-col  flex-wrap m-2 items-center justify-center md:justify-start h-36 md:h-screen w-screen md:w-1/3":"hidden",children:0!==S.userfriends.length?S.userfriends.map((function(e){return Object(j.jsx)(i.Suspense,{fallback:Object(j.jsx)("h1",{children:"loading....."}),children:Object(j.jsx)(O,{id:e._id,username:e.username,profileimage:e.profileimage,chatroom:r,currentuser:n,type:"groupChat"},e._id)})})):Object(j.jsx)("h1",{className:"text-white",children:"No friends"})})]})}},99:function(e,t,r){"use strict";var n=r(97),a=r.n(n),s=r(98),c=r(109),o=r(110),u=r(105),i=r.n(u),l=function(){function e(){Object(c.a)(this,e),this.userGoogleLogin=function(){var e=Object(s.a)(a.a.mark((function e(t,r){var n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"content-type":"application/json"}},e.next=4,i.a.post(t,r,n);case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),this.userFacebookLogin=function(){var e=Object(s.a)(a.a.mark((function e(t,r){var n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"content-type":"application/json"}},e.next=4,i.a.post(t,r,n);case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()}return Object(o.a)(e,[{key:"sendformData",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r){var n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"content-type":"application/json"}},e.prev=1,e.next=4,i.a.post(t,r,n);case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getuser",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"content-type":"application/json",Authorization:"Bearer ".concat(n)}},e.prev=1,e.next=4,i.a.post(t,r,s);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get(t);case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrivateData",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r){var n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"content-type":"application/json",Authorization:"Bearer ".concat(r)}},e.prev=1,e.next=4,i.a.get(t,n);case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fileUpload",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(n)}},e.prev=1,e.next=4,i.a.post(t,r,s);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}();t.a=l}}]);
//# sourceMappingURL=10.368e4638.chunk.js.map