{"version":3,"sources":["UIshared/button/button.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/friendRequests/friendRequests.js","components/friendRequests/FriendRequest/friendRequest.js","services/apiRequestService.js"],"names":["button","props","linkTo","to","className","classname","text","type","onClick","onclickHandler","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","user","FriendRequest","socket","useContext","socketContext","useEffect","emit","roomname","off","profileimage","src","process","OUTPUT_URL","alt","username","status","console","log","requestFrom","requestTo","SideBar","lazy","apiRequest","apiRequestService","FriendRequests","useState","userid","setUserid","friendRequests","setRequests","on","friendRequest","a","fetchPrivateData","PRIVATE_URL","sessionStorage","getItem","res","data","_id","fetchData","fallback","length","map","request","userGoogleLogin","url","config","headers","axios","post","response","userFacebookLogin","token","message","get"],"mappings":"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","file":"static/js/14.9e132925.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./button.css\";\r\nimport { Link } from \"react-router-dom\";\r\nconst button = (props) => {\r\n  return props.linkTo ? (\r\n    <Link to={props.linkTo} >\r\n      <button className={props.classname}>{props.text}</button>\r\n    </Link>\r\n  ) : (\r\n    <button className={props.classname} type={props.type} onClick={props.onclickHandler}>\r\n      {props.text}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default button;\r\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { useContext, useEffect, useState,lazy,Suspense } from \"react\";\r\nimport { socketContext} from \"../../index.js\";\r\nimport FriendRequest from \"./FriendRequest/friendRequest.js\";\r\nimport apiRequestService from \"../../services/apiRequestService.js\";\r\nconst SideBar = lazy(()=>import(\"../sideBar/sideBar.js\"));\r\nconst apiRequest = new apiRequestService();\r\nlet user;\r\nconst FriendRequests = () => {\r\n  const socket = useContext(socketContext);\r\n  // const userid = useContext(userContext);\r\n  // console.log(userid);\r\n  const [userid ,setUserid] = useState(user);\r\n\r\n  const [friendRequests, setRequests] = useState([]);\r\n  // const [state, setState] = useState({ requestFrom: \"\", requestTo: \"\" });\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"join\", { roomname: \"friendrequest\" });\r\n    return () => {\r\n      socket.off();\r\n    };\r\n  }, []);\r\n\r\n  socket.on(\"addfriendupdate\", ({ friendRequest, requestFrom, requestTo }) => {\r\n    console.log(\"add friend update running on the client\");\r\n    console.log(friendRequest);\r\n    // setState({ requestFrom: userid, requestTo: requestTo });\r\n    // setUserid(userid);\r\n    user = requestTo;\r\n    // console.log(user);\r\n    if(requestTo===userid){\r\n      setRequests([...friendRequests, friendRequest]);\r\n      console.log(friendRequests);\r\n    }\r\n  });\r\n\r\n  socket.on('updatedRequests',({FriendRequests,userid})=>{\r\n    console.log(FriendRequests);\r\n    console.log(friendRequests);\r\n    if(user===userid){\r\n      setRequests([...FriendRequests]);\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const res = await apiRequest.fetchPrivateData(\r\n        `${process.env.PRIVATE_URL}/getuserdata`,\r\n        sessionStorage.getItem(\"authToken\")\r\n      );\r\n      console.log(res);\r\n      user = res.data.user._id;\r\n      setUserid(user);\r\n      console.log(user);\r\n      setRequests([...friendRequests, ...res.data.user.friendRequests]);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n    <div className=\"friendRequestComponent h-screen w-screen\">\r\n\r\n<Suspense fallback={<h1>loading...</h1>}>\r\n    <SideBar />\r\n</Suspense>\r\n      <h1 className=\"text-2xl font-bold text-center text-white mt-4\">Friend Request's</h1>\r\n      <div className=\"friendRequestContainer flex flex-col md:flex-row md:flex-wrap items-center justify-center\">\r\n        {friendRequests.length !== 0 ? (\r\n          friendRequests.map((request) => {\r\n            console.log(request);\r\n            return (\r\n              <FriendRequest\r\n                key={request._id}\r\n                username={request.username}\r\n                profileimage={request.profileimage}\r\n                status={request.status}\r\n                requestFrom={request._id}\r\n                requestTo={userid}\r\n              />\r\n            );\r\n          })\r\n        ) : (\r\n          <h1 className=\"text-lg text-white\">No friend requests!!!</h1>\r\n        )}\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FriendRequests;\r\n","import React,{useEffect,useContext} from 'react';\r\nimport {socketContext} from '../../../index.js';\r\nimport {Link} from 'react-router-dom';\r\nimport './friendRequest.css';\r\nimport Button from '../../../UIshared/button/button.js';\r\nconst FriendRequest = (props) => {\r\n\r\n    const socket = useContext(socketContext);\r\n\r\n    useEffect(() => {\r\n        socket.emit('join',{roomname:\"requestAccept\"});\r\n        return ()=>{\r\n            socket.off()\r\n        }\r\n    },[])\r\n\r\n    const acceptHandler=()=>{\r\n        console.log(\"Accept request is running on client\")\r\n        socket.emit('acceptRequest',{requestFrom:props.requestFrom,requestTo:props.requestTo});       \r\n    }\r\n\r\n    const declineHandler=()=>{\r\n        console.log(\"declineHandler is running on client\");\r\n        console.log(\"requestFrom : \",props.requestFrom,\"requestTo : \",props.requestTo);\r\n        socket.emit('declineRequest',{requestFrom:props.requestFrom,requestTo:props.requestTo});\r\n    }\r\n    \r\n\r\n    return (\r\n        <div className=\"friendrequest w-4/5 md:w-1/4 md:h-40 flex items-center justify-center m-4 md:m-8 p-2 md:p-4 rounded-md\">\r\n\r\n{\r\n\r\n            props.profileimage ?<img src={`${process.env.OUTPUT_URL}/${props.profileimage}`} className=\"h-14 md:h-16 w-14  md:w-16 rounded-full border-4 border-white\" alt=\"image\"/> : null\r\n}\r\n        \r\n            <Link to={`/profile/${props.username}`} className=\"m-2 md:m-8\">\r\n                <span className=\"md:text-xl text-white font-bold\">{props.username}</span>\r\n            </Link>\r\n            <span className={props.status ? \"text-xl font-bold text-green-300\" : \"text-xl font-bold text-blue-300\"}>{props.status}</span>\r\n            <Button classname=\"bg-green-400 text-white font-bold p-1 md:p-2 rounded-md border-2 border-white  hover:bg-green-500 m-1 md:m-4\" text=\"✔\" onclickHandler={acceptHandler}/>\r\n            <Button classname=\"bg-red-400 text-white font-bold p-1 md:p-2 rounded-md  border-2 border-white hover:bg-red-500 m-1 md:m-4\" text=\"❌\" onclickHandler={declineHandler}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FriendRequest;\r\n","import axios from 'axios';\r\nclass apiRequestService{\r\n    async sendformData(url, data){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"application/json\"\r\n            }\r\n        }       \r\n        try{\r\n            const response = await axios.post(url,data,config);\r\n            // console.log(response);\r\n            return response;\r\n        }\r\n        catch(err){\r\n            // console.log(err);\r\n            return err;\r\n        }\r\n    }\r\n\r\n    async getuser(url,data,token){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"application/json\",\r\n                \"Authorization\":`Bearer ${token}`\r\n            }\r\n        }\r\n        try{\r\n            const response = await axios.post(url,data,config);\r\n            return response;\r\n        }\r\n        catch(err){\r\n            return err.message;\r\n        }\r\n\r\n    }\r\n\r\n    async fetchData(url){\r\n        try{\r\n            const response = await axios.get(url);\r\n            return response;\r\n        }\r\n        catch(err){\r\n            return err;\r\n        }\r\n    }\r\n\r\n    async fetchPrivateData(url,token){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"application/json\",\r\n                \"Authorization\":`Bearer ${token}`\r\n            }\r\n        };\r\n        try {\r\n            const response = await axios.get(url,config);\r\n            return response;\r\n        } catch (error) {\r\n            return error;\r\n        }\r\n\r\n    }\r\n\r\n    async fileUpload(url,data,token){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"multipart/form-data\",\r\n                \"Authorization\":`Bearer ${token}`\r\n            }\r\n        }\r\n        try {\r\n            const response = await axios.post(url,data,config);\r\n            // console.log(response);\r\n            return response;\r\n        } catch (error) {\r\n            // console.log(error);\r\n            return error;    \r\n        }\r\n    }\r\n\r\n    userGoogleLogin=async(url,data)=>{\r\n        try{\r\n            const config ={\r\n                headers:{\r\n                    \"content-type\": \"application/json\"\r\n                }\r\n            }\r\n            const response = await axios.post(url,data,config)\r\n            return response;\r\n        }\r\n        catch(error){\r\n            return error;\r\n        }\r\n    }\r\n\r\n    userFacebookLogin=async(url,data)=>{\r\n        try{\r\n            const config ={\r\n                headers:{\r\n                    \"content-type\": \"application/json\"\r\n                }\r\n            }\r\n            const response = await axios.post(url,data,config)\r\n            return response;\r\n        }\r\n        catch(error){\r\n            return error;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default apiRequestService;"],"sourceRoot":""}