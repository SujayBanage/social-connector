(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[11],{100:function(e,t,n){"use strict";n(0),n(103);var r=n(14),a=n(1);t.a=function(e){return e.linkTo?Object(a.jsx)(r.b,{to:e.linkTo,children:Object(a.jsx)("button",{className:e.classname,children:e.text})}):Object(a.jsx)("button",{className:e.classname,type:e.type,onClick:e.onclickHandler,children:e.text})}},102:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},103:function(e,t,n){},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(112);var a=n(111);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},255:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var r=n(97),a=n.n(r),c=n(98),o=n(108),i=n(101),s=n(0),u=n(50),l=n(102),p=n(14),f=n(100),d=(n(255),n(1)),m=function(e){var t=Object(s.useContext)(u.socketContext);return Object(d.jsxs)("div",{className:"request"===e.type||"accept"===e.type||"groupChatRequest"===e.type||"positive"===e.type?" notificationSuccess flex  items-center justify-center p-2 md:p-4 m-2 md:m-4 rounded-lg":"notification flex  items-center justify-center p-2 md:p-4 m-2 md:m-4 rounded-lg",children:[Object(d.jsxs)("div",{className:"notificationfrom flex items-center justify-center",children:[e.img?Object(d.jsx)("img",Object(l.a)({src:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PRIVATE_URL,"/").concat(e.img),alt:"profileimg",className:"h-12 md:h-16 w-12 md:w-16 rounded-full border-2 border-white"},"alt","image")):null,Object(d.jsx)(p.b,{to:"/profile/".concat(e.name),className:"m-2 md:m-4",children:Object(d.jsx)("span",{className:"hidden md:flex md:text-xl font-bold",children:e.name})})]}),Object(d.jsx)("span",{className:"md:text-xl text-white",children:e.text}),Object(d.jsx)(f.a,{text:"\u274c",classname:"rounded-md p-1 border-2 bordet-white md:p-2 bg-red-400 md:m-4 hover:bg-red-500",onclickHandler:function(){console.log("notification clear handler is running on client!!!"),t.emit("singleNotificationClear",{id:e.id,userid:e.userid})}}),"groupChatRequest"===e.type?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f.a,{text:"accept",classname:"rounded-md p-1 md:p-2 bg-blue-400 md:m-4 hover:bg-blue-500",onclickHandler:function(){var n=e.text.split(":");console.log(n),t.emit("addUserToChat",{user:e.userid,chatroom:n[1],currentuser:e.name})}}),Object(d.jsx)(f.a,{text:"decline",classname:"rounded-md p-1 md:p-2 bg-red-400 md:m-4 hover:bg-red-500",onclickHandler:function(){var n=e.text.split(":");console.log(n),t.emit("groupChatDecline",{user:e.userid,chatroom:n[1],currentuser:e.name})}})]}):null]})},b=new(n(99).a),j=Object(s.lazy)((function(){return n.e(20).then(n.bind(null,127))}));t.default=function(){var e=Object(s.useContext)(u.socketContext),t=Object(s.useState)([]),n=Object(i.a)(t,2),r=n[0],l=n[1],p=Object(s.useState)({}),h=Object(i.a)(p,2),v=h[0],x=h[1];Object(s.useEffect)((function(){return e.emit("join",{roomname:"notifications"}),function(){e.off()}}),[]),e.on("friendRequestNotify",(function(e){var t=e.requestFrom,n=e.requestTo;console.log("requestFrom",t),console.log("requestTo",n),t.username!==v.username?l(Object(o.a)(n.notifications)):l(Object(o.a)(t.notifications))})),e.on("declineRequestNotify",(function(e){var t=e.requestFrom,n=e.requestTo;console.log("request from : ",t),console.log("request to : ",n),t.username!==v.username?l(Object(o.a)(n.notifications)):l(Object(o.a)(t.notifications))})),e.on("notificationUpdate",(function(e){var t=e.Notifications,n=e.User;console.log("notificationUpdate is running on clinet side!!"),console.log(t),v.username===n.username&&l(Object(o.a)(t))})),e.on("notificationClear",(function(e){var t=e.Notifications;console.log("notificationclear is running on clinet side!!"),l(Object(o.a)(t))})),e.on("groupChatInvite",(function(e){var t=e.requestFrom,n=e.requestTo;t.username!==v.username?l(Object(o.a)(n.notifications)):l(Object(o.a)(t.notifications))})),e.on("groupChatDecline",(function(e){var t=e.notifyFrom,n=e.notifyTo;t.username!==v.username?l(Object(o.a)(n.notifications)):l(Object(o.a)(t.notifications))})),Object(s.useEffect)((function(){function e(){return(e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.fetchPrivateData("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PRIVATE_URL,"/getuserdata"),sessionStorage.getItem("authToken"));case 2:t=e.sent,console.log(t.data.user),x(t.data.user),console.log(v),l(Object(o.a)(t.data.user.notifications)),console.log(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"flex h-screen w-screen flex-col items-center",children:[Object(d.jsx)(s.Suspense,{fallback:Object(d.jsx)("h1",{children:"loading..."}),children:Object(d.jsx)(j,{})}),0===r.length?null:Object(d.jsx)(f.a,{text:"clear-all",classname:"clear-all text-white md:text-xl p-1 md:p-2 m-2 md:m-4 rounded-lg",onclickHandler:function(){e.emit("clearAllNotifications",{userid:v._id})}}),Object(d.jsx)("div",{className:"notifications flex flex-col",children:0!==r.length?r.map((function(e){return console.log(e),Object(d.jsx)(m,{id:e._id,userid:v._id,text:e.text,img:e.img,name:e.name,type:e.typeof},e._id)})):Object(d.jsx)("h1",{className:"text-xl font-bold text-white",children:"No notifications!!"})})]})})}},99:function(e,t,n){"use strict";var r=n(97),a=n.n(r),c=n(98),o=n(109),i=n(110),s=n(105),u=n.n(s),l=function(){function e(){Object(o.a)(this,e),this.userGoogleLogin=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:{"content-type":"application/json"}},e.next=4,u.a.post(t,n,r);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),this.userFacebookLogin=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:{"content-type":"application/json"}},e.next=4,u.a.post(t,n,r);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()}return Object(i.a)(e,[{key:"sendformData",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"content-type":"application/json"}},e.prev=1,e.next=4,u.a.post(t,n,r);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getuser",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"content-type":"application/json",Authorization:"Bearer ".concat(r)}},e.prev=1,e.next=4,u.a.post(t,n,c);case 4:return o=e.sent,e.abrupt("return",o);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPrivateData",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"content-type":"application/json",Authorization:"Bearer ".concat(n)}},e.prev=1,e.next=4,u.a.get(t,r);case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fileUpload",value:function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(r)}},e.prev=1,e.next=4,u.a.post(t,n,c);case 4:return o=e.sent,e.abrupt("return",o);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}();t.a=l}}]);
//# sourceMappingURL=11.986441f7.chunk.js.map