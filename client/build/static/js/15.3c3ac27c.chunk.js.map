{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","UIshared/lazyload/lazyload.js","components/comments/comments.js","services/apiRequestService.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","LazyLoad","props","useState","showImage","setShowImage","imageRef","useRef","useEffect","ref","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","disconnect","observe","resgisterObserver","current","src","imgsrc","alt","className","styleClass","srcset","sizes","Comment","lazy","apiRequest","apiRequestService","Comments","socket","useContext","socketContext","useParams","postid","userid","comments","setComments","comment","setComment","creatorName","creatorImg","postImg","description","likes","dislikes","post","setPost","a","fetchData","process","PRIVATE_URL","res","console","log","data","emit","roomname","off","on","user","OUTPUT_URL","replace","to","length","htmlFor","id","name","type","placeholder","onChange","e","target","onClick","text","map","cmt","fallback","commentid","_id","commentBy","children","userGoogleLogin","url","config","headers","axios","response","userFacebookLogin","token","message","get"],"mappings":"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","file":"static/js/15.3c3ac27c.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React,{useState,useRef,useEffect} from 'react';\r\n\r\n\r\nconst resgisterObserver=(ref,setShowImage)=>{\r\n    const observer = new IntersectionObserver((entries,observer)=>{\r\n        entries.forEach((entry)=>{\r\n            if(!entry.isIntersecting){\r\n                return;\r\n            }\r\n            setShowImage(true);\r\n            observer.disconnect();\r\n        })\r\n\r\n    });\r\n    observer.observe(ref)\r\n}\r\n\r\nconst LazyLoad =(props)=>{\r\n    const [showImage,setShowImage] = useState(false);\r\n    const imageRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        //!add intersection observer!!!\r\n        resgisterObserver(imageRef.current,setShowImage);\r\n    },[])\r\n\r\n\r\n    if(showImage){\r\n        return (\r\n            <img src={props.imgsrc} alt=\"image\" className={props.styleClass} alt=\"image\" srcSet={props.srcset} sizes={props.sizes}/>\r\n            // <img src={props.imgsrc} alt=\"image\" className={props.styleClass} alt=\"image\"/>\r\n        )\r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n        <span ref={imageRef}></span>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LazyLoad;","import React, { useEffect, useState, useContext,lazy,Suspense } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { socketContext } from \"../../index.js\";\r\nimport \"./comments.css\";\r\nimport apiRequestService from \"../../services/apiRequestService.js\";\r\nimport LazyLoad from \"../../UIshared/lazyload/lazyload.js\";\r\nconst Comment = lazy(()=>import(\"./comment/comment.js\")) ;\r\nconst apiRequest = new apiRequestService();\r\nconst Comments = () => {\r\n  const socket = useContext(socketContext);\r\n  const { postid, userid } = useParams();\r\n  const [comments, setComments] = useState([]);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [post, setPost] = useState({\r\n    creatorName: \"\",\r\n    creatorImg: \"\",\r\n    postImg: \"\",\r\n    description: \"\",\r\n    likes: [],\r\n    dislikes: [],\r\n  });\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const res = await apiRequest.fetchData(`${process.env.PRIVATE_URL}/getpost/${postid}`);\r\n      console.log(res);\r\n      setPost({\r\n        creatorName: res.data.post.creatorName,\r\n        creatorImg: res.data.post.creatorImg,\r\n        postImg: res.data.post.imgsrc,\r\n        description: res.data.post.description,\r\n        likes: [...res.data.post.likes],\r\n        dislikes: [...res.data.post.dislikes],\r\n      });\r\n      setComments([...res.data.comments]);\r\n      console.log(comments);\r\n      console.log(post);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"join\", { roomname: \"commentsroom\" });\r\n    return () => {\r\n      socket.off();\r\n    };\r\n  }, []);\r\n\r\n  socket.on(\"updatedComments\", ({ Comments ,user}) => {\r\n    if(user === post.creatorName){\r\n      setComments([...Comments]);\r\n      console.log(Comments);\r\n    }\r\n  });\r\n\r\n  socket.on(\"reply\", ({ Comments }) => {\r\n    setComments([...Comments]);\r\n  });\r\n\r\n  socket.on(\"commentLikeUpdate\", ({ Comments }) => {\r\n    console.log(Comments);\r\n    setComments([...Comments]);\r\n  });\r\n\r\n  socket.on(\"commentDislikeUpdate\", ({ Comments }) => {\r\n    console.log(Comments);\r\n    setComments([...Comments]);\r\n  });\r\n\r\n  const commentHandler = (e) => {\r\n    setComment(e.target.value);\r\n  };\r\n\r\n  const addCommentHandler = () => {\r\n    socket.emit(\"commentsUpdate\", { postid, userid, text: comment });\r\n    setComment(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"commentsComponent h-full w-screen flex flex-col items-center  justify-between\">\r\n        <div className=\"post flex flex-col lg:flex-row lg:items-center items-center lg:p-2 justify-center lg:h-2/5 w-4/5 lg:w-1/2   mt-4 rounded-lg\">\r\n          <div className=\"postimg flex flex-col flex-wrap items-center lg:w-4/5 h-full m-2 \">\r\n            <LazyLoad\r\n              imgsrc={`${process.env.OUTPUT_URL}/${post.postImg}`}\r\n              styleClass=\"object-cover rounded-lg\"\r\n              alt=\"image\"\r\n            />\r\n          </div>\r\n          <div className=\"postinfo flex flex-col items-center \">\r\n            <div className=\"postcreator flex items-center justify-start  m-2\">\r\n              <LazyLoad\r\n                imgsrc={`${process.env.OUTPUT_URL}/${post.creatorImg.replace(\r\n                  /\\\\/g,\r\n                  \"/\"\r\n                )}`}\r\n                styleClass=\"h-10 w-10 md:h-12 md:w-12 rounded-full mr-2\"\r\n                alt=\"image\"\r\n              />\r\n              <Link to={`/profile/${post.creatorName}`}>\r\n                <span className=\"font-bold\">{post.creatorName}</span>\r\n              </Link>\r\n            </div>\r\n            <div className=\"postdescription m-2\">\r\n              <span> description: {post.description}</span>\r\n            </div>\r\n            <div className=\"postresponse flex items-center justify-between m-2\">\r\n              <span className=\"m-1\">likes: {post.likes.length}</span>\r\n              <span className=\"m-1\">dislikes: {post.dislikes.length}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"addCommentDiv p-4 w-3/5\">\r\n          <div className=\"mb-4\">\r\n            <label\r\n              className=\"block text-white text-center md:text-xl font-bold mb-2\"\r\n              htmlFor=\"descreption\"\r\n            >\r\n              add comment...\r\n            </label>\r\n            <textarea\r\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\r\n              id=\"comment\"\r\n              name=\"comment\"\r\n              type=\"text\"\r\n              placeholder=\"add comment....\"\r\n              value={comment}\r\n              onChange={commentHandler}\r\n            />\r\n            <button\r\n              onClick={addCommentHandler}\r\n              className=\"addComment md:h-12 md:w-26 bg-green-500 text-center text-white font-bold md:text-xl p-2 rounded-md\"\r\n            >\r\n              add comment\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"commentsContainer h-1/2 w-full lg:w-3/5 overflow-y-scroll p-4\">\r\n          {comments.length !== 0\r\n            ? comments.map((cmt) => {\r\n                return (\r\n                  <Suspense fallback={<h1>loading...</h1>}>\r\n                  <Comment\r\n                    key={cmt._id}\r\n                    commentid={cmt._id}\r\n                    text={cmt.text}\r\n                    postid={cmt.postid}\r\n                    commentBy={cmt.commentBy}\r\n                    likes={cmt.likes}\r\n                    dislikes={cmt.dislikes}\r\n                    children={cmt.children}\r\n                    userid={userid}\r\n                  />\r\n                  </Suspense>\r\n                );\r\n              })\r\n            : null}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import axios from 'axios';\r\nclass apiRequestService{\r\n    async sendformData(url, data){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"application/json\"\r\n            }\r\n        }       \r\n        try{\r\n            const response = await axios.post(url,data,config);\r\n            // console.log(response);\r\n            return response;\r\n        }\r\n        catch(err){\r\n            // console.log(err);\r\n            return err;\r\n        }\r\n    }\r\n\r\n    async getuser(url,data,token){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"application/json\",\r\n                \"Authorization\":`Bearer ${token}`\r\n            }\r\n        }\r\n        try{\r\n            const response = await axios.post(url,data,config);\r\n            return response;\r\n        }\r\n        catch(err){\r\n            return err.message;\r\n        }\r\n\r\n    }\r\n\r\n    async fetchData(url){\r\n        try{\r\n            const response = await axios.get(url);\r\n            return response;\r\n        }\r\n        catch(err){\r\n            return err;\r\n        }\r\n    }\r\n\r\n    async fetchPrivateData(url,token){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"application/json\",\r\n                \"Authorization\":`Bearer ${token}`\r\n            }\r\n        };\r\n        try {\r\n            const response = await axios.get(url,config);\r\n            return response;\r\n        } catch (error) {\r\n            return error;\r\n        }\r\n\r\n    }\r\n\r\n    async fileUpload(url,data,token){\r\n        const config = {\r\n            headers:{\r\n                \"content-type\": \"multipart/form-data\",\r\n                \"Authorization\":`Bearer ${token}`\r\n            }\r\n        }\r\n        try {\r\n            const response = await axios.post(url,data,config);\r\n            // console.log(response);\r\n            return response;\r\n        } catch (error) {\r\n            // console.log(error);\r\n            return error;    \r\n        }\r\n    }\r\n\r\n    userGoogleLogin=async(url,data)=>{\r\n        try{\r\n            const config ={\r\n                headers:{\r\n                    \"content-type\": \"application/json\"\r\n                }\r\n            }\r\n            const response = await axios.post(url,data,config)\r\n            return response;\r\n        }\r\n        catch(error){\r\n            return error;\r\n        }\r\n    }\r\n\r\n    userFacebookLogin=async(url,data)=>{\r\n        try{\r\n            const config ={\r\n                headers:{\r\n                    \"content-type\": \"application/json\"\r\n                }\r\n            }\r\n            const response = await axios.post(url,data,config)\r\n            return response;\r\n        }\r\n        catch(error){\r\n            return error;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default apiRequestService;"],"sourceRoot":""}